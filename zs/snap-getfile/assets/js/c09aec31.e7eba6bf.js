"use strict";(self.webpackChunkmetamask_docs=self.webpackChunkmetamask_docs||[]).push([[1953],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},f="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),f=p(n),u=i,m=f["".concat(o,".").concat(u)]||f[u]||d[u]||s;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=u;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[f]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<s;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},42547:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const s={description:"Include and retrieve static files in the Snap bundle.",sidebar_position:11},r="Handle static files",l={unversionedId:"how-to/handle-static-files",id:"how-to/handle-static-files",title:"Handle static files",description:"Include and retrieve static files in the Snap bundle.",source:"@site/snaps/how-to/handle-static-files.md",sourceDirName:"how-to",slug:"/how-to/handle-static-files",permalink:"/zs/snap-getfile/snaps/how-to/handle-static-files",draft:!1,editUrl:"https://github.com/MetaMask/metamask-docs/edit/main/snaps/how-to/handle-static-files.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{description:"Include and retrieve static files in the Snap bundle.",sidebar_position:11},sidebar:"snapsSidebar",previous:{title:"Troubleshoot",permalink:"/zs/snap-getfile/snaps/how-to/troubleshoot"},next:{title:"Concepts",permalink:"/zs/snap-getfile/snaps/concepts"}},o={},p=[{value:"Specify static files in the Snap&#39;s manifest",id:"specify-static-files-in-the-snaps-manifest",level:2},{value:"Load files using <code>snap_getFile</code>",id:"load-files-using-snap_getfile",level:2}],c={toc:p},f="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(f,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"handle-static-files"},"Handle static files"),(0,i.kt)("p",null,"The Snaps platform provides a static file API that is useful to load Wasm modules, ZK circuits, or anything else that needs to be lazily loaded."),(0,i.kt)("p",null,"To handle static files in your Snap bundle, you have to:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Specify them in the Snap's manifest"),(0,i.kt)("li",{parentName:"ol"},"Use ",(0,i.kt)("a",{parentName:"li",href:"/zs/snap-getfile/snaps/reference/snaps-api#snap_getfile"},(0,i.kt)("inlineCode",{parentName:"a"},"snap_getFile"))," to retrieve the file contents")),(0,i.kt)("h2",{id:"specify-static-files-in-the-snaps-manifest"},"Specify static files in the Snap's manifest"),(0,i.kt)("p",null,"Static files should be specified as an array in the ",(0,i.kt)("inlineCode",{parentName:"p"},"source.files")," field of the manifest. File paths are relative to the Snap package root, i.e. one level above the ",(0,i.kt)("inlineCode",{parentName:"p"},"src")," directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="snap.manifest.json"',title:'"snap.manifest.json"'},'{\n  "source": {\n    "shasum": "xxx",\n    "location": {\n      // ...\n    },\n    "files": [\n      "./files/myfile.bin"\n    ]\n  }\n}\n')),(0,i.kt)("h2",{id:"load-files-using-snap_getfile"},"Load files using ",(0,i.kt)("inlineCode",{parentName:"h2"},"snap_getFile")),(0,i.kt)("p",null,"In your Snap code, load static files using the ",(0,i.kt)("a",{parentName:"p",href:"/zs/snap-getfile/snaps/reference/snaps-api#snap_getfile"},(0,i.kt)("inlineCode",{parentName:"a"},"snap_getFile")," RPC method"),". This method will return a string in the encoding specified, defaulting to ",(0,i.kt)("inlineCode",{parentName:"p"},"base64")," if no encoding is specified:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="snap/src/index.js"',title:'"snap/src/index.js"'},"const contents = await snap.request({\n  method: 'snap_getFile',\n  params: {\n    path: './files/myfile.bin',\n    encoding: 'hex',\n  },\n});\n\n// `0x...`\nconsole.log(contents);\n")))}d.isMDXComponent=!0}}]);